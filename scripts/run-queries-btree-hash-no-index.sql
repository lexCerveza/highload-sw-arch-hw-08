USE test;

-- BTREE index

CREATE INDEX `datebirth_btree` ON `users` (`datebirth`) USING BTREE;

EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');

EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';

DROP INDEX `datebirth_btree` ON `users`;

-- HASH index

CREATE INDEX `datebirth_btree` ON `users` (`datebirth`) USING HASH;

EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');

EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';

-- DROP INDEX `datebirth_btree` ON `users`;

-- No index

EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE (datebirth BETWEEN '1985-07-18' AND '1986-07-18');

EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
EXPLAIN ANALYZE SELECT COUNT(*) FROM users WHERE datebirth = '2007-08-06';
